{
  "4": {
    "inputs": {
      "steps": param_steps,
      "network_trainer": [
        "144",
        0
      ]
    },
    "class_type": "FluxTrainLoop",
    "_meta": {
      "title": "Flux Train Loop"
    }
  },
  "9": {
    "inputs": {
      "images": [
        "141",
        1
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Preview Image"
    }
  },
  "14": {
    "inputs": {
      "save_state": false,
      "copy_to_comfy_lora_folder": false,
      "network_trainer": [
        "4",
        0
      ]
    },
    "class_type": "FluxTrainSave",
    "_meta": {
      "title": "Flux Train Save LoRA"
    }
  },
  "44": {
    "inputs": {
      "steps": param_steps,
      "network_trainer": [
        "141",
        0
      ]
    },
    "class_type": "FluxTrainLoop",
    "_meta": {
      "title": "Flux Train Loop"
    }
  },
  "46": {
    "inputs": {
      "images": [
        "145",
        1
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Preview Image"
    }
  },
  "47": {
    "inputs": {
      "save_state": false,
      "copy_to_comfy_lora_folder": false,
      "network_trainer": [
        "44",
        0
      ]
    },
    "class_type": "FluxTrainSave",
    "_meta": {
      "title": "Flux Train Save LoRA"
    }
  },
  "59": {
    "inputs": {
      "steps": param_steps,
      "network_trainer": [
        "145",
        0
      ]
    },
    "class_type": "FluxTrainLoop",
    "_meta": {
      "title": "Flux Train Loop"
    }
  },
  "61": {
    "inputs": {
      "images": [
        "146",
        1
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Preview Image"
    }
  },
  "62": {
    "inputs": {
      "save_state": false,
      "copy_to_comfy_lora_folder": false,
      "network_trainer": [
        "59",
        0
      ]
    },
    "class_type": "FluxTrainSave",
    "_meta": {
      "title": "Flux Train Save LoRA"
    }
  },
  "64": {
    "inputs": {
      "steps": param_steps,
      "network_trainer": [
        "146",
        0
      ]
    },
    "class_type": "FluxTrainLoop",
    "_meta": {
      "title": "Flux Train Loop"
    }
  },
  "66": {
    "inputs": {
      "images": [
        "147",
        1
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Preview Image"
    }
  },
  "70": {
    "inputs": {
      "plot_style": "ggplot",
      "window_size": 1000,
      "normalize_y": true,
      "width": 768,
      "height": 512,
      "log_scale": false,
      "network_trainer": [
        "147",
        0
      ]
    },
    "class_type": "VisualizeLoss",
    "_meta": {
      "title": "Visualize Loss"
    }
  },
  "74": {
    "inputs": {
      "output": "",
      "source": [
        "133",
        2
      ]
    },
    "class_type": "Display Any (rgthree)",
    "_meta": {
      "title": "Display Any (rgthree)"
    }
  },
  "78": {
    "inputs": {
      "text_x": 10,
      "text_y": 2,
      "height": 48,
      "font_size": 32,
      "font_color": "white",
      "label_color": "black",
      "font": "default",
      "text": [
        "79",
        0
      ],
      "direction": "up",
      "image": [
        "141",
        1
      ]
    },
    "class_type": "AddLabel",
    "_meta": {
      "title": "Add Label"
    }
  },
  "79": {
    "inputs": {
      "prefix": "steps ",
      "suffix": "",
      "input": [
        "4",
        1
      ]
    },
    "class_type": "SomethingToString",
    "_meta": {
      "title": "Something To String"
    }
  },
  "80": {
    "inputs": {
      "text_x": 10,
      "text_y": 2,
      "height": 48,
      "font_size": 32,
      "font_color": "white",
      "label_color": "black",
      "font": "default",
      "text": [
        "81",
        0
      ],
      "direction": "up",
      "image": [
        "145",
        1
      ]
    },
    "class_type": "AddLabel",
    "_meta": {
      "title": "Add Label"
    }
  },
  "81": {
    "inputs": {
      "prefix": "steps ",
      "suffix": "",
      "input": [
        "44",
        1
      ]
    },
    "class_type": "SomethingToString",
    "_meta": {
      "title": "Something To String"
    }
  },
  "82": {
    "inputs": {
      "prefix": "steps ",
      "suffix": "",
      "input": [
        "59",
        1
      ]
    },
    "class_type": "SomethingToString",
    "_meta": {
      "title": "Something To String"
    }
  },
  "83": {
    "inputs": {
      "text_x": 10,
      "text_y": 2,
      "height": 48,
      "font_size": 32,
      "font_color": "white",
      "label_color": "black",
      "font": "default",
      "text": [
        "82",
        0
      ],
      "direction": "up",
      "image": [
        "146",
        1
      ]
    },
    "class_type": "AddLabel",
    "_meta": {
      "title": "Add Label"
    }
  },
  "84": {
    "inputs": {
      "prefix": "steps ",
      "suffix": "",
      "input": [
        "64",
        1
      ]
    },
    "class_type": "SomethingToString",
    "_meta": {
      "title": "Something To String"
    }
  },
  "85": {
    "inputs": {
      "text_x": 10,
      "text_y": 2,
      "height": 48,
      "font_size": 32,
      "font_color": "white",
      "label_color": "black",
      "font": "default",
      "text": [
        "84",
        0
      ],
      "direction": "up",
      "image": [
        "147",
        1
      ]
    },
    "class_type": "AddLabel",
    "_meta": {
      "title": "Add Label"
    }
  },
  "90": {
    "inputs": {
      "filename_prefix": "flux_lora_loss_plot",
      "images": [
        "70",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "97": {
    "inputs": {
      "plot_style": "seaborn-v0_8-dark-palette",
      "window_size": 100,
      "normalize_y": true,
      "width": 768,
      "height": 512,
      "log_scale": false,
      "network_trainer": [
        "4",
        0
      ]
    },
    "class_type": "VisualizeLoss",
    "_meta": {
      "title": "Visualize Loss"
    }
  },
  "98": {
    "inputs": {
      "filename_prefix": "flux_lora_loss_plot",
      "images": [
        "97",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "99": {
    "inputs": {
      "plot_style": "seaborn-v0_8-dark-palette",
      "window_size": 100,
      "normalize_y": true,
      "width": 768,
      "height": 512,
      "log_scale": false,
      "network_trainer": [
        "44",
        0
      ]
    },
    "class_type": "VisualizeLoss",
    "_meta": {
      "title": "Visualize Loss"
    }
  },
  "100": {
    "inputs": {
      "filename_prefix": "flux_lora_loss_plot",
      "images": [
        "99",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "101": {
    "inputs": {
      "plot_style": "seaborn-v0_8-dark-palette",
      "window_size": 100,
      "normalize_y": true,
      "width": 768,
      "height": 512,
      "log_scale": false,
      "network_trainer": [
        "59",
        0
      ]
    },
    "class_type": "VisualizeLoss",
    "_meta": {
      "title": "Visualize Loss"
    }
  },
  "102": {
    "inputs": {
      "filename_prefix": "flux_lora_loss_plot",
      "images": [
        "101",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "105": {
    "inputs": {
      "output": "",
      "source": [
        "144",
        2
      ]
    },
    "class_type": "Display Any (rgthree)",
    "_meta": {
      "title": "Display Any (rgthree)"
    }
  },
  "112": {
    "inputs": {
      "width": param_width,
      "height": param_height,
      "batch_size": param_batch_size,
      "dataset_path": "param_file_path",
      "class_tokens": "param_lora_name",
      "enable_bucket": true,
      "bucket_no_upscale": false,
      "num_repeats": 1,
      "min_bucket_reso": 256,
      "max_bucket_reso": 1024,
      "dataset_config": [
        "137",
        0
      ]
    },
    "class_type": "TrainDatasetAdd",
    "_meta": {
      "title": "TrainDatasetAdd"
    }
  },
  "117": {
    "inputs": {
      "num_columns": [
        "120",
        3
      ],
      "match_image_size": false,
      "max_resolution": 4096,
      "images": [
        "119",
        0
      ]
    },
    "class_type": "ImageConcatFromBatch",
    "_meta": {
      "title": "Image Concatenate From Batch"
    }
  },
  "119": {
    "inputs": {
      "inputcount": 4,
      "Update inputs": null,
      "image_1": [
        "78",
        0
      ],
      "image_2": [
        "80",
        0
      ],
      "image_3": [
        "83",
        0
      ],
      "image_4": [
        "85",
        0
      ]
    },
    "class_type": "ImageBatchMulti",
    "_meta": {
      "title": "Image Batch Multi"
    }
  },
  "120": {
    "inputs": {
      "image": [
        "78",
        0
      ]
    },
    "class_type": "GetImageSizeAndCount",
    "_meta": {
      "title": "Get Image Size & Count"
    }
  },
  "129": {
    "inputs": {
      "text_x": 10,
      "text_y": 2,
      "height": 48,
      "font_size": 32,
      "font_color": "white",
      "label_color": "black",
      "font": "default",
      "text": [
        "133",
        0
      ],
      "direction": "up",
      "image": [
        "117",
        0
      ]
    },
    "class_type": "AddLabel",
    "_meta": {
      "title": "Add Label"
    }
  },
  "130": {
    "inputs": {
      "filename_prefix": "flux_lora_trainer_sheet",
      "images": [
        "129",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "133": {
    "inputs": {
      "save_state": false,
      "network_trainer": [
        "147",
        0
      ]
    },
    "class_type": "FluxTrainEnd",
    "_meta": {
      "title": "Flux LoRA Train End"
    }
  },
  "134": {
    "inputs": {
      "save_state": false,
      "copy_to_comfy_lora_folder": false,
      "network_trainer": [
        "64",
        0
      ]
    },
    "class_type": "FluxTrainSave",
    "_meta": {
      "title": "Flux Train Save LoRA"
    }
  },
  "137": {
    "inputs": {
      "color_aug": false,
      "flip_aug": false,
      "shuffle_caption": false,
      "caption_dropout_rate": 0,
      "alpha_mask": false,
      "reset_on_queue": false,
      "caption_extension": ""
    },
    "class_type": "TrainDatasetGeneralConfig",
    "_meta": {
      "title": "TrainDatasetGeneralConfig"
    }
  },
  "140": {
    "inputs": {
      "checkpoint": "param_base_model"
    },
    "class_type": "SDXLModelSelect",
    "_meta": {
      "title": "SDXL Model Select"
    }
  },
  "141": {
    "inputs": {
      "network_trainer": [
        "14",
        0
      ],
      "validation_settings": [
        "143",
        0
      ]
    },
    "class_type": "SDXLTrainValidate",
    "_meta": {
      "title": "SDXL Train Validate"
    }
  },
  "143": {
    "inputs": {
      "steps": 20,
      "width": param_width,
      "height": param_height,
      "guidance_scale": 7.5,
      "sampler": "euler",
      "seed": 42
    },
    "class_type": "SDXLTrainValidationSettings",
    "_meta": {
      "title": "SDXL Train Validation Settings"
    }
  },
  "144": {
    "inputs": {
      "output_name": "param_character_id.safetensors",
      "output_dir": "/opt/output/",
      "network_dim": 16,
      "network_alpha": 16,
      "learning_rate": 1,
      "max_train_steps": param_max_train_steps,
      "cache_latents": "disk",
      "cache_text_encoder_outputs": "disk",
      "highvram": false,
      "blocks_to_swap": 0,
      "fp8_base": false,
      "gradient_dtype": "fp32",
      "save_dtype": "fp16",
      "attention_mode": "sdpa",
      "train_text_encoder": "disabled",
      "clip_l_lr": 0,
      "clip_g_lr": 0,
      "sample_prompts_pos": "param_test_promt",
      "sample_prompts_neg": "param_negative_prompt",
      "gradient_checkpointing": "disabled",
      "additional_args": "",
      "SDXL_models": [
        "140",
        0
      ],
      "dataset": [
        "112",
        0
      ],
      "optimizer_settings": [
        "149",
        0
      ]
    },
    "class_type": "InitSDXLLoRATraining",
    "_meta": {
      "title": "Init SDXL LoRA Training"
    }
  },
  "145": {
    "inputs": {
      "network_trainer": [
        "47",
        0
      ],
      "validation_settings": [
        "143",
        0
      ]
    },
    "class_type": "SDXLTrainValidate",
    "_meta": {
      "title": "SDXL Train Validate"
    }
  },
  "146": {
    "inputs": {
      "network_trainer": [
        "62",
        0
      ],
      "validation_settings": [
        "143",
        0
      ]
    },
    "class_type": "SDXLTrainValidate",
    "_meta": {
      "title": "SDXL Train Validate"
    }
  },
  "147": {
    "inputs": {
      "network_trainer": [
        "134",
        0
      ],
      "validation_settings": [
        "143",
        0
      ]
    },
    "class_type": "SDXLTrainValidate",
    "_meta": {
      "title": "SDXL Train Validate"
    }
  },
  "148": {
    "inputs": {
      "max_grad_norm": 0,
      "lr_scheduler": "constant_with_warmup",
      "lr_warmup_steps": 100,
      "lr_scheduler_num_cycles": 1,
      "lr_scheduler_power": 1,
      "relative_step": false,
      "scale_parameter": false,
      "warmup_init": false,
      "clip_threshold": 1,
      "min_snr_gamma": 5,
      "extra_optimizer_args": ""
    },
    "class_type": "OptimizerConfigAdafactor",
    "_meta": {
      "title": "Optimizer Config Adafactor"
    }
  },
  "149": {
    "inputs": {
      "lr": 2,
      "max_grad_norm": 0,
      "prodigy_steps": params_steps,
      "d0": 0.000001,
      "d_coef": 2,
      "split_groups": true,
      "use_bias_correction": true,
      "min_snr_gamma": 5,
      "use_stableadamw": true,
      "use_cautious": true,
      "use_adopt": true,
      "use_grams": true,
      "stochastic_rounding": true,
      "use_orthograd": "",
      "use_focus ": false,
      "extra_optimizer_args": ""
    },
    "class_type": "OptimizerConfigProdigyPlusScheduleFree",
    "_meta": {
      "title": "Optimizer Config ProdigyPlusScheduleFree"
    }
  },
  "160": {
    "inputs": {
      "images": [
        "161",
        0
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Preview Image"
    }
  },
  "161": {
    "inputs": {
      "folder": "param_file_path",
      "width": param_width,
      "height": param_height,
      "keep_aspect_ratio": "pad",
      "image_load_cap": 10,
      "start_index": 0,
      "include_subfolders": false
    },
    "class_type": "LoadImagesFromFolderKJ",
    "_meta": {
      "title": "Load Images From Folder (KJ)"
    }
  }
}